<script type="text/javascript">
    RED.nodes.registerType('tag-memory',{
        category: 'buffer',
        color: '#b39ddb',
        defaults: {
            name: {value:""},
			filter: {value:1000},
			outtopic: {value:""},
			extclock: {value:false},
			triggertopic: {value:""}
			},
        inputs:1,
        outputs:1,
        icon: "node_icon.png",
        label: function() {
            return this.name||"tag-memory";
        }
    });
</script>

<script type="text/html" data-template-name="tag-memory">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
		<label for="node-input-filter"><i class="fa fa-tag"></i> Self-Clock (ms)</label>
		<input type="number" id="node-input-filter" placeholder="Self-Clock">
    </div>
    <div class="form-row">
        <label for="node-input-outtopic"><i class="fa fa-tag"></i> Out Topic</label>
        <input type="text" id="node-input-outtopic" placeholder="Out Topic"> 
	</div>
    <div class="form-row">
		<label for="node-input-extclock"><i class="fa fa-tag"></i> Use External Clock</label>
		<input type="checkbox" id="node-input-extclock" placeholder="Use External Clock">
    </div>
    <div class="form-row">
		<label for="node-input-triggertopic"><i class="fa fa-tag"></i> External Clock Topic</label>
		<input type="text" id="node-input-triggertopic" placeholder="External Clock Topic">
    </div>
</script>

<script type="text/html" data-help-name="tag-memory">
  <p>Tag-Memory</p>
  <p>The node consist in a single element buffer. It store the message from the input, sending at regular interval or by external trigger.</p>
  <p>Parameters</h3>
  <dl class="message-properties">
    <dt>Self-Clock<span class="property-type">int</span></dt>
    <dd>This property sets the internal clock timer in milliseconds.</dd>
  </dl>
  <dl class="message-properties">
    <dt>Out Topic<span class="property-type">string</span></dt>
    <dd>This property override the topic from the input message. If not set, input topic will get pass-through output.</dd>
  </dl>
  <dl class="message-properties">
    <dt>Use External Clock<span class="property-type">bool</span></dt>
    <dd>This property inhibith the internal timer, waiting for "External Clock Topic" to be received, to trigger msg output. "External Clock Topic" need to be defined.</dd>
  </dl>
  <dl class="message-properties">
    <dt>External Clock Topic<span class="property-type">string</span></dt>
    <dd>This property sets the topic that will be used as clock for triggering message send</dd>
  </dl>
</script>
